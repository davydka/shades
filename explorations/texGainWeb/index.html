<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:700i&display=swap" rel="stylesheet">
		<link rel="stylesheet" href="/style/style.css">
	</head>
	<body>
		<h1>
			Dead // Night
		</h1>
		<canvas
			class="glsl"
			data-fragment-url="frag.frag"
			data-textures-x="img_narcissus2.jpg"
			widthX="1200"
			heightX="944"
			style="background-color: rgba(1, 1, 1, 0); width: 100%; height: 100%;"
			>
		</canvas>
	</body>
	<script src="/GlslCanvas.js"></script>
	<script>
		let canvas;
		let sandbox;

		fetch('img_narcissus2.jpg').then(function(response) {
			if(response.ok) {
				return response.blob();
			}
			throw new Error('Network response was not ok.');
			}).then(function(myBlob) { 
				var objectURL = URL.createObjectURL(myBlob); 
				canvas = document.querySelector(".glsl");
				sandbox = new GlslCanvas(canvas);
				sandbox.setUniform("u_tex0",objectURL);
				canvas.style.width = '100vw';
				canvas.style.height = '100vh';
				canvas.style.position = 'absolute';
			}).catch(function(error) {
				console.log('There has been a problem with your fetch operation: ', error.message);
			});
	</script>
</html>
